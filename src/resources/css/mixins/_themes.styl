//
// Add a new item theme to the themes collection
//
-add-theme(--target, --identifier, --item-theme-groups)
  --item-themes = {}
  --item-themes-gradient = {}
  --item-themes-color = {}

  for --item-theme in --item-theme-groups
    --item-themes-gradient = merge(--item-themes-gradient, lookup('--gradients-' + --item-theme))
    --item-themes-color = merge(--item-themes-color, lookup('--colors-' + --item-theme))

  for --item-theme-name in --item-themes-color
    --item-themes[--item-theme-name] = {}

    if --item-themes-gradient
      --item-themes[--item-theme-name]['gradient'] = --item-themes-gradient[--item-theme-name]
    if --item-themes-color
      --item-themes[--item-theme-name]['color'] = --item-themes-color[--item-theme-name]

  --target[--identifier] = --item-themes